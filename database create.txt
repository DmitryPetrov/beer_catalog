\! chcp 1251

CREATE DATABASE beer_catalog;
\c beer_catalog;

CREATE TABLE beer (
	id BIGSERIAL PRIMARY KEY,
	rate INTEGER CONSTRAINT rate_check CHECK (rate >= 1 AND rate <= 100),
	count INTEGER CONSTRAINT count_check CHECK (count > 0),
	star BOOLEAN,
	craft BOOLEAN,
	name TEXT UNIQUE,
	description TEXT,
	photo TEXT
	);
	
CREATE TABLE style (
	id BIGSERIAL PRIMARY KEY,
	name TEXT UNIQUE NOT NULL
	);
	
CREATE TABLE country (
	id BIGSERIAL PRIMARY KEY,
	name TEXT UNIQUE NOT NULL
	);
	
CREATE TABLE brewery (
	id BIGSERIAL PRIMARY KEY,
	name TEXT UNIQUE NOT NULL
	);
	
CREATE TABLE snack (
	id BIGSERIAL PRIMARY KEY,
	name TEXT UNIQUE NOT NULL
	);
	
CREATE TABLE beer_style (
	id_beer BIGINT,
	id_style BIGINT,
	PRIMARY KEY (id_beer, id_style)
	);
	
CREATE TABLE beer_country (
	id_beer BIGINT,
	id_country BIGINT,
	PRIMARY KEY (id_beer, id_country)
	);
	
CREATE TABLE beer_brewery (
	id_beer BIGINT,
	id_brewery BIGINT,
	PRIMARY KEY (id_beer, id_brewery)
	);
	
CREATE TABLE beer_snack (
	id_beer BIGINT,
	id_snack BIGINT,
	PRIMARY KEY (id_beer, id_snack)
	);
	
CREATE TABLE style_snack (
	id_style BIGINT,
	id_snack BIGINT,
	PRIMARY KEY (id_style, id_snack)
	);\n